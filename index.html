<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Five Forks Fire Weather</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
</head>

<body data-color-scheme="light">
  <div class="container">
    <header>
      <div class="location-info">
        <h1>Five Forks</h1>
        <p class="subtitle">Virginia Fire Weather</p>
      </div>
      <div class="header-controls">
        <button class="icon-btn" id="themeToggle" aria-label="Toggle day/night mode" title="Toggle theme">ğŸŒ—</button>
        <button class="icon-btn" id="refreshBtn" aria-label="Refresh data" title="Refresh">ğŸ”„</button>
      </div>
    </header>

    <div class="quick-links">
      <a href="https://firms.modaps.eosdis.nasa.gov/map/" target="_blank" class="link-btn">
        <span class="link-icon">ğŸ›°ï¸</span><span class="link-label">FIRMS</span>
      </a>
      <a href="https://www.weather.gov/akq/" target="_blank" class="link-btn">
        <span class="link-icon">ğŸŒ§ï¸</span><span class="link-label">NWS</span>
      </a>
      <a href="https://maps.app.goo.gl/vcWebUQrrLSY8gX4A" target="_blank" class="link-btn">
        <span class="link-icon">ğŸ—ºï¸</span><span class="link-label">Equip</span>
      </a>
      <a href="https://www.windy.com/?37.233,-77.400,8" target="_blank" class="link-btn">
        <span class="link-icon">ğŸŒªï¸</span><span class="link-label">Windy</span>
      </a>

      <button class="link-btn" id="fuelCalcBtn" title="Fuel Moisture Calculator">
        <span class="link-icon">ğŸ’§</span><span class="link-label">Fuel Calc</span>
      </button>
    </div>

    <!-- 3-day forecast -->
    <section class="forecast-section" id="forecastSection">
      <h2>3-Day Fire Weather Forecast</h2>
      <div id="forecastDates" class="forecast-dates"></div>
      <div id="forecastOverview" class="forecast-overview"></div>
      <div class="table-container">
        <table id="forecastTable" class="forecast-table"></table>
      </div>
    </section>

    <!-- County cards -->
    <section class="counties-section">
      <h2>County Conditions</h2>
      <div class="county-grid" id="countyGrid"></div>
    </section>

    <!-- Map -->
    <section class="map-section">
      <h2>Fire Activity Map</h2>
      <div id="map"></div>
    </section>

    <footer>
      <p>Last updated: <span id="lastUpdate">Loading...</span></p>
      <p class="data-note">Data updates every 6 hours â€¢ NWS + FIRMS</p>
    </footer>
  </div>

  <!-- Fuel Calculator Modal -->
  <div id="fuelCalcModal" class="modal" style="display:none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ğŸ’§ Fuel Moisture Calculator</h2>
        <button class="modal-close" id="modalCloseBtn">&times;</button>
      </div>

      <div class="modal-body" id="fuelCalcBody">
        <div class="calc-section">
          <h3>Initial Fuel Moisture</h3>
          <div class="input-row">
            <label>1-hour fuel (%): <input type="number" id="initial1hr" value="8" min="1" max="30" step="0.1"></label>
            <label>10-hour fuel (%): <input type="number" id="initial10hr" value="10" min="1" max="30" step="0.1"></label>
          </div>
        </div>

        <div class="calc-section">
          <h3>Forecast Conditions</h3>
          <div class="forecast-table">
            <table>
              <thead>
                <tr>
                  <th>Day</th><th>Max Temp (Â°F)</th><th>Min RH (%)</th><th>Avg Wind (mph)</th><th>Drying Hours</th>
                </tr>
              </thead>
              <tbody id="forecastDays"></tbody>
            </table>
          </div>
        </div>

        <div class="calc-section">
          <button id="runModelBtn" class="btn-primary">Run Fuel Moisture Model</button>
        </div>

        <div id="resultsSection" class="calc-section" style="display:none;">
          <h3>Model Results</h3>
          <div id="resultsTable"></div>
          <div id="warningMessage" class="warning-box" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="fuel-calculator.js"></script>
  <script src="dashboard.js"></script>
</body>
</html>
