<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Weather Briefs - Five Forks</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d32f2f;
            margin-bottom: 10px;
            font-size: 2em;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .info-box {
            background: #fff3cd;
            border-left: 4px solid #ffa726;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .info-box h3 {
            margin-bottom: 10px;
            color: #f57c00;
        }
        .brief-list {
            list-style: none;
        }
        .brief-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f9f9f9;
            border-left: 3px solid #4ECDC4;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .brief-item:hover {
            background: #f0f0f0;
        }
        .brief-name {
            font-weight: 500;
            color: #333;
        }
        .brief-date {
            color: #666;
            font-size: 0.9em;
        }
        .btn {
            display: inline-block;
            padding: 8px 16px;
            background: #d32f2f;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .btn:hover {
            background: #b71c1c;
        }
        .back-link {
            margin-top: 30px;
            display: inline-block;
            color: #1976d2;
            text-decoration: none;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Fire Weather Briefs</h1>
        <p class="subtitle">Five Forks Volunteer Fire Department - Virginia</p>
        
        <div class="info-box">
            <h3>üìã About These Briefs</h3>
            <p>Daily fire weather briefings are automatically generated for the Five Forks service area, covering Amelia, Brunswick, Dinwiddie, Greensville, Nottoway, and Prince George counties. Each brief includes current conditions, fire danger ratings, and forecast information.</p>
            <p style="margin-top: 10px;"><strong>For maintainers:</strong> Brief files (.docx) are stored in the <code>/briefs</code> folder and are automatically generated by the daily-brief workflow.</p>
        </div>

        <h2 style="margin-bottom: 20px;">Available Briefs</h2>
        <ul class="brief-list" id="briefList">
            <li class="brief-item">
                <div>
                    <div class="brief-name">Loading briefs...</div>
                    <div class="brief-date">Please wait</div>
                </div>
            </li>
        </ul>

        <a href="../index.html" class="back-link">‚Üê Back to Dashboard</a>
    </div>

    <script>
        // Load and display available briefs
        async function loadBriefs() {
            const briefList = document.getElementById('briefList');
            try {
                // Fetch the briefs directory listing from GitHub API
                const response = await fetch('https://api.github.com/repos/jamesdcochran-oss/Virginia-2025-Fall-Fire-Season/contents/briefs');
                const files = await response.json();
                
                // Filter for .docx files only
                const briefs = files.filter(file => file.name.endsWith('.docx')).reverse();
                
                if (briefs.length === 0) {
                    briefList.innerHTML = `
                        <li class="brief-item">
                            <div>
                                <div class="brief-name">No briefs available yet</div>
                                <div class="brief-date">Briefs will appear here once generated</div>
                            </div>
                        </li>
                    `;
                    return;
                }
                
                briefList.innerHTML = '';
                briefs.forEach(brief => {
                    const li = document.createElement('li');
                    li.className = 'brief-item';
                    
                    // Parse date from filename (format: Five_Forks_Brief_YYYYMMDD_HHMMSS.docx)
                    const match = brief.name.match(/(\d{8})_(\d{6})/);
                    let dateStr = 'Unknown date';
                    if (match) {
                        const dateNum = match[1];
                        const year = dateNum.substring(0, 4);
                        const month = dateNum.substring(4, 6);
                        const day = dateNum.substring(6, 8);
                        dateStr = `${year}-${month}-${day}`;
                    }
                    
                    li.innerHTML = `
                        <div>
                            <div class="brief-name">${brief.name}</div>
                            <div class="brief-date">${dateStr}</div>
                        </div>
                        <a href="${brief.download_url}" class="btn" download>Download</a>
                    `;
                    briefList.appendChild(li);
                });
            } catch (error) {
                console.error('Error loading briefs:', error);
                briefList.innerHTML = `
                    <li class="brief-item">
                        <div>
                            <div class="brief-name">Error loading briefs</div>
                            <div class="brief-date">Please check the GitHub repository or contact the maintainer</div>
                        </div>
                    </li>
                `;
            }
        }

        // Load briefs when page loads
        loadBriefs();
    </script>
</body>
</html>
